openapi: 3.0.1
info:
  title: Holiday Management
  description: REST API endpoints for managing Holiday
  version: 0.0.0-SNAPSHOT
servers:
  - url: 'https'
paths:
  /service/add:
    post:
      tags:
        - Service
      summary: add a new service
      description: add a new service
      operationId: createService
      requestBody:
        description: Service object that need to be add
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceDTO'
      responses:
        201:
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                format: uuid
        409:
          description: HOLIDAY-SERVICE-4009
        401:
          description: HOLIDAY-SERVICE-4001
  /service/{id}/activate:
    put:
      tags:
        - Service
      summary: activate a new service
      description: activate a new service
      operationId: activateServiceById
      parameters:
        - name: id
          in: path
          description: service id to activate
          required: true
          schema:
            type: string
            format: uuid
      responses:
        204:
          description: successful operation
        409:
          description: HOLIDAY-SERVICE-4009
        404:
          description: HOLIDAY-SERVICE-4004
  /service/{id}/deactivate:
    put:
      tags:
        - Service
      summary: deactivate a new service
      description: deactivate a new service
      operationId: deactivateServiceById
      parameters:
        - name: id
          in: path
          description: service id to deactivate
          required: true
          schema:
            type: string
            format: uuid
      responses:
        204:
          description: successful operation
        409:
          description: HOLIDAY-SERVICE-4009
        404:
          description: HOLIDAY-SERVICE-4004
  /services:
    get:
      tags:
        - Service
      summary: get all services
      description: get all services
      operationId: getAllServices
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ServiceDTO'
        400:
          description: HOLIDAY-SERVICE-4000
        401:
          description: HOLIDAY-SERVICE-4001
  /service/{id}:
    get:
      tags:
        - Service
      summary: get a service
      description: get an service
      operationId: getServiceById
      parameters:
        - name: id
          in: path
          description: service id to be fetch
          required: true
          schema:
            type: string
            format: uuid
      responses:
        204:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                items:
                  $ref: '#/components/schemas/ServiceDTO'
        400:
          description: HOLIDAY-SERVICE-4000
        401:
          description: HOLIDAY-SERVICE-4001
    put:
      tags:
        - Service
      summary: update service
      description: update service
      operationId: updateService
      parameters:
        - name: id
          in: path
          description: Service id to be update
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
          description: Service object that need to be update
          required: true
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceDTO'
      responses:
          204:
            description: successful operation
          404:
            description: HOLIDAY-SERVICE-4004

  /post/add:
    post:
      tags:
        - Post
      summary: add a new post
      description: add a new post
      operationId: createPost
      requestBody:
        description: Post object that need to be add
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostDTO'
      responses:
        201:
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                format: uuid
        409:
          description: HOLIDAY-POST-4009
        401:
          description: HOLIDAY-POST-4001
  /post/{id}/activate:
    put:
      tags:
        - Post
      summary: activate a new post
      description: activate a new post
      operationId: activatePostById
      parameters:
        - name: id
          in: path
          description: post id to activate
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
        409:
          description: HOLIDAY-POST-4009
        401:
          description: HOLIDAY-POST-4001
  /post/{id}/deactivate:
    put:
      tags:
        - Post
      summary: deactivate a new post
      description: deactivate a new post
      operationId: deactivatePostById
      parameters:
        - name: id
          in: path
          description: post id to deactivate
          required: true
          schema:
            type: string
            format: uuid
      responses:
        204:
          description: successful operation
        409:
          description: HOLIDAY-POST-4009
        404:
          description: HOLIDAY-POST-4004
  /posts:
    get:
      tags:
        - Post
      summary: get all posts
      description: get all posts
      operationId: getAllPosts
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PostDTO'
        400:
          description: HOLIDAY-POST-4000
        401:
          description: HOLIDAY-POST-4001
  /post/{id}:
    get:
      tags:
        - Post
      summary: get a post
      description: get a post
      operationId: getPostById
      parameters:
        - name: id
          in: path
          description: post id to be fetch
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                items:
                  $ref: '#/components/schemas/PostDTO'
        400:
          description: HOLIDAY-POST-4000
        401:
          description: HOLIDAY-POST-4001
    put:
      tags:
        - Post
      summary: update post
      description: update post
      operationId: updatePost
      parameters:
        - name: id
          in: path
          description: Post id to be update
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Post object that need to be update
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PostDTO'
      responses:
        204:
          description: successful operation
        404:
          description: HOLIDAY-POST-4004
  /post/service/{id}:
    get:
      tags:
        - Post
      summary: get a post by service
      description: get a post
      operationId: getPostByServiceId
      parameters:
        - name: id
          in: path
          description: service id to be use to fetch posts
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                items:
                  $ref: '#/components/schemas/PostDTO'
        404:
          description: HOLIDAY-SERVICE-4004
        401:
          description: HOLIDAY-EMPLOYEE-4001

  /employee/add:
    post:
      tags:
        - Employee
      summary: add a new employee
      description: add a new employee
      operationId: createEmployee
      requestBody:
        description: Employee object that need to be add
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmployeeDTO'
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                format: uuid
        409:
          description: HOLIDAY-EMPLOYEE-4009
        401:
          description: HOLIDAY-EMPLOYEE-4001
  /employees:
    get:
      tags:
        - Employee
      summary: get all employees
      description: get all employees
      operationId: getAllEmployees
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/EmployeeDTO'
        400:
          description: HOLIDAY-EMPLOYEE-4000
        401:
          description: HOLIDAY-EMPLOYEE-4001
  /employee:
    post:
      tags:
        - Employee
      summary: employee authentication
      description: employee authentication
      operationId: authenticateEmployee
      requestBody:
        description: Employee object that we need to authenticate the user
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmployeeDTO'
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                format: uuid
        404:
          description: HOLIDAY-EMPLOYEE-4004

  /employee/{id}:
    get:
      tags:
        - Employee
      summary: get an employee
      description: get an employee
      operationId: getEmployeeById
      parameters:
        - name: id
          in: path
          description: employee id to be fetch
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                items:
                  $ref: '#/components/schemas/EmployeeDTO'
        400:
          description: HOLIDAY-EMPLOYEE-4000
        401:
          description: HOLIDAY-EMPLOYEE-4001
    put:
      tags:
        - Employee
      summary: update employee
      description: update employee
      operationId: updateEmployee
      parameters:
        - name: id
          in: path
          description: Employee id to be update
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Employee object that need to be update
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmployeeDTO'
      responses:
        204:
          description: successful operation
        404:
          description: HOLIDAY-EMPLOYEE-4004

  /role/add:
    post:
      tags:
        - Role
      summary: add a new role
      description: add a new role
      operationId: createRole
      requestBody:
        description: Role object that need to be add
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoleDTO'
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                format: uuid
        409:
          description: HOLIDAY-ROLE-4009
        401:
          description: HOLIDAY-ROLE-4001
  /role/{id}:
    get:
      tags:
        - Role
      summary: get an role
      description: get an role
      operationId: getRoleById
      parameters:
        - name: id
          in: path
          description: role id to be fetch
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                items:
                  $ref: '#/components/schemas/RoleDTO'
        400:
          description: HOLIDAY-ROLE-4000
        401:
          description: HOLIDAY-ROLE-4001
    put:
      tags:
        - Role
      summary: update role
      description: update role
      operationId: updateRole
      parameters:
        - name: id
          in: path
          description: Role id to be update
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Role object that need to be update
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoleDTO'
      responses:
        204:
          description: successful operation
        404:
          description: HOLIDAY-ROLE-4004
  /roles:
    get:
      tags:
        - Role
      summary: get all roles
      description: get all roles
      operationId: getAllRoles
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RoleDTO'
        400:
          description: HOLIDAY-ROLE-4000
        401:
          description: HOLIDAY-ROLE-4001
  /role/{id}/assign-permissions:
    put:
      tags:
        - Role
      summary: assign permissions to role
      description: assign permissions to role
      operationId: assignPermissionToRoleId
      parameters:
        - name: id
          in: path
          description: post id to activate
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: List of permissions that need to be add to this role
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RoleDTO'
      responses:
        200:
          description: successful operation
        409:
          description: HOLIDAY-POST-4009
        401:
          description: HOLIDAY-POST-4001
  /role/{id}/activate:
    put:
      tags:
        - Role
      summary: activate a new role
      description: activate a new role
      operationId: activateRoleById
      parameters:
        - name: id
          in: path
          description: role id to activate
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
        409:
          description: HOLIDAY-ROLE-4009
        401:
          description: HOLIDAY-ROLE-4001
  /role/{id}/deactivate:
    put:
      tags:
        - Role
      summary: deactivate a new role
      description: deactivate a new role
      operationId: deactivateRoleById
      parameters:
        - name: id
          in: path
          description: role id to deactivate
          required: true
          schema:
            type: string
            format: uuid
      responses:
        204:
          description: successful operation
        409:
          description: HOLIDAY-ROLE-4009
        404:
          description: HOLIDAY-ROLE-4004

  /holidayRequest/add:
    post:
      tags:
        - HolidayRequest
      summary: create a new holiday request
      description: create a new holiday request
      operationId: createHolidayRequest
      requestBody:
        description: holiday request object that need to be add
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HolidayRequestDTO'
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: string
                format: uuid
        409:
          description: HOLIDAY-REQUEST-4009
        401:
          description: HOLIDAY-REQUEST-4001
  /holidayRequest/{id}:
    get:
      tags:
        - HolidayRequest
      summary: get an holiday request
      description: get an holiday request
      operationId: getHolidayRequestById
      parameters:
        - name: id
          in: path
          description: holiday request id to be fetch
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                items:
                  $ref: '#/components/schemas/HolidayRequestDTO'
        400:
          description: HOLIDAY-REQUEST-4000
        401:
          description: HOLIDAY-REQUEST-4001
    put:
      tags:
        - HolidayRequest
      summary: update holiday request
      description: update holiday request
      operationId: updateHolidayRequest
      parameters:
        - name: id
          in: path
          description: Holiday Request id to be update
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Holiday Request object that need to be update
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HolidayRequestDTO'
      responses:
        204:
          description: successful operation
        404:
          description: HOLIDAY-REQUEST-4004
  /holidayRequest:
    get:
      tags:
        - HolidayRequest
      summary: get all holiday requests
      description: get all holiday requests
      operationId: getAllHolidayRequest
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HolidayRequestDTO'
        400:
          description: HOLIDAY-REQUEST-4000
        401:
          description: HOLIDAY-REQUEST-4001
components:
  schemas:
    EmployeeDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: identifier the user id
        firstname:
          type: string
          description: user firstname
        lastName:
          type: string
          description: user lastname
        password:
          type: string
          description: user password
        email:
          type: string
          description: user email
        createdAt:
          type: string
          format: date-time
          description: user arriving date
        updatedAt:
          type: string
          format: date-time
          description: user updating date
        roles:
          type: array
          items:
           $ref: '#/components/schemas/RoleDTO'
        holidays:
          type: array
          description: holidays request for a user
          items:
            $ref: "#/components/schemas/HolidayRequestDTO"
        setting:
          $ref: '#/components/schemas/SettingDTO'
        posts:
          type: array
          items:
            $ref: '#/components/schemas/PostDTO'
    RoleDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: identifier the role
        type:
          $ref: '#/components/schemas/USER_ROLE'
        description:
          type: string
          description: role description
    ServiceDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: service identifier
        name:
          type: string
          description: service name
        posts:
          type: array
          items:
            $ref: '#/components/schemas/PostDTO'
          description: All the posts present in this service
        description:
          type: string
          description: service description
        isActive:
          type: boolean
          description: describe if the service is active or not
        createdAt:
          type: string
          format: date-time
          description: service creation date
        updatedAt:
          type: string
          format: date-time
          description: service modification date
    PostDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: service identifier
        name:
          type: string
          description: service name
        description:
          type: string
          description: department description
        service:
          $ref: '#/components/schemas/ServiceDTO'
        isActive:
          type: boolean
          description: describe if the post is active or not
        createdAt:
          type: string
          format: date-time
          description: service creation date
        updatedAt:
          type: string
          format: date-time
          description: service modification date
    HolidayRequestDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: identifier the holiday id
        description:
          type: string
          description: holiday request description
        startingDate:
          type: string
          format: date-time
          description: user arriving date
        endingDate:
          type: string
          format: date-time
          description: user updating date
        returningDate:
          type: string
          format: date-time
          description: user updating date
        holidayType:
          $ref: '#/components/schemas/HolidayTypeDTO'
        employee:
          $ref: '#/components/schemas/EmployeeDTO'
    HolidayTypeDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Holiday type identifier
        name:
          type: string
          description: name of the holiday type
        description:
          type: string
          description: an explanation and  maybe some condition and restrictions
    SettingDTO:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: identifier the setting
        defaultEmailNotification:
          type: string
          description: default email notification which will be the company email
        customEmailNotification:
          type: string
          description: another email notification chose by the user
    USER_ROLE:
      type: string
      enum:
        - ADMIN
        - EMPLOYEE
        - HUMAN_RESOURCE
    PERMISSIONS:
      type: string
      enum:
        - employee:create
        - employee:read
        - employee:edit
